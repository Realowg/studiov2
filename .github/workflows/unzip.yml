name: Reassemble and Unzip Split Files

on:
  push:
    paths:
      - 'Studio.part*'  # Trigger only when split files are pushed
    branches:
      - main  # Adjust the branch name as needed

jobs:
  unzip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository content
        uses: actions/checkout@v2

      - name: List files (before reassembly)
        run: ls -la

      - name: Reassemble split parts into zip file
        run: |
          cat Studio.part* > Studio.zip
          ls -la  # List to confirm reassembly

      - name: Unzip reassembled zip file
        run: |
          unzip Studio.zip -d unzipped_files
          ls -la unzipped_files

      - name: Commit unzipped files
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add unzipped_files/*
          git commit -m "Add unzipped files"
          git push
